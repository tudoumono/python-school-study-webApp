# PyPuzzle デモガイド

## アプリURL

https://main.d3avt5f3q04niu.amplifyapp.com/

スマートフォンでの利用を想定したUIです。PCの場合はブラウザの開発者ツールでモバイル表示にすると実際の体験に近くなります。

---

## PyPuzzle とは

Python初学者（中高生）向けの文法学習Webアプリです。Duolingo形式の**ドラッグ＆ドロップ操作**で、Pythonの基本文法を繰り返し練習できます。

### 特徴
- コードを「書く」のではなく「並べ替える」ことで、文法構造を直感的に学べる
- トークン単位（`print`, `(`, `"Hello"`, `)`）と行単位（`x = 10`）の2つの問題モード
- 苦手傾向を自動分析し、弱点に合わせた問題をピックアップ
- 学習の進捗・ポイント・連続日数を記録してモチベーションを維持

---

## デモの操作手順

### 1. トップ画面

アプリを開くと挨拶とステータスカードが表示されます。

- **ポイント** — 問題を解いて獲得した累計ポイント
- **日連続** — 連続で学習した日数（ストリーク）
- **問クリア** — クリアした問題の総数

3つのアクションカードから学習を開始できます。

### 2. 「学習をはじめる」 → カテゴリ選択

5つのカテゴリが用意されています：

| カテゴリ | 内容 | 問題数 |
|---|---|---|
| 変数とデータ型 | 変数の代入、文字列、数値 | 4問 |
| print文 | print()による出力 | 4問 |
| 条件分岐 | if / elif / else | 4問 |
| ループ | for / while | 4問 |
| 関数 | def / return | 4問 |

カテゴリはロック制になっており、前のカテゴリを50%クリアすると次が解放されます。

### 3. 問題を解く

問題画面では、バラバラに並んだコードブロックを**正しい順番にドラッグ＆ドロップ**で並べ替えます。

- **トークンモード**: `print`, `(`, `"Hello, World!"`, `)` のように単語・記号単位
- **行モード**: `x = 15`, `if x > 10:`, `print("大きい")` のように行単位

操作のポイント：
- ブロックを長押しして上下にドラッグ
- インデント（字下げ）のあるブロックは視覚的に段差がついている
- ダミーブロック（間違い選択肢）が混ざっている問題もある

### 4. 正解・不正解のフィードバック

- **正解**: ポイント獲得、次の問題へ進むボタンが表示
- **不正解**: どこが間違っているかのフィードバック、再挑戦可能
- **ヒント**: 困ったときはヒントボタンで段階的なヒントを表示

### 5. 「ニガテ問題に挑戦」

過去の回答履歴から苦手な傾向を分析し、5問をピックアップします。
（初回はランダムに選出されます）

### 6. 「問題一覧」

登録されている全問題をリスト表示します。問題ID、難易度、ポイント、カテゴリが確認できます。

### 7. プロフィール（画面下部のナビゲーション）

- 現在のレベルと次のレベルまでのプログレスバー
- 総ポイント、最長連続日数、クリア問題数
- 学習データのエクスポート（JSON形式）
- 進捗リセット機能

---

## 現在のデモの制約

| 項目 | 状態 | 補足 |
|---|---|---|
| 問題データ | サンプル20問 | 本番ではGoogle Sheetsから動的に取得 |
| カテゴリ | 5カテゴリ固定 | 本番ではスプレッドシートから動的に管理 |
| データ保存 | ブラウザのlocalStorage | 端末・ブラウザ固有。クリアで消える |
| 認証 | なし | 今後Cognito認証を導入予定 |
| 学習ログ | 未接続 | 本番ではスプレッドシートに自動追記 |

黄色のバナー「サンプル問題を表示しています」が表示される場合、Google Sheets未接続のモックモードで動作中です。全機能は問題なく体験できます。

---

## 今後の展開

### 短期（実装準備済み）
- Google Sheetsからの問題・カテゴリ動的取得
- 学習ログのスプレッドシート自動追記
- 講師向け集計ダッシュボード（スプレッドシート内QUERY式）

### 中期
- Cognito認証によるユーザー管理
- ユーザー進捗のクラウド保存（スプレッドシート）
- 問題数の拡充（カテゴリあたり10問以上）

### 長期
- 新しい問題形式（エラー修正、出力予測、穴埋め）
- 忘却曲線ベースの復習システム
- クラス管理ダッシュボード

---

## 技術スタック

| 領域 | 技術 |
|---|---|
| フロントエンド | Next.js 16 + TypeScript |
| スタイリング | Tailwind CSS v4 |
| D&D操作 | @dnd-kit |
| 状態管理 | zustand（localStorage永続化） |
| 問題データ | Google Sheets API v4 |
| ホスティング | AWS Amplify |
| 認証（予定） | Amazon Cognito |
